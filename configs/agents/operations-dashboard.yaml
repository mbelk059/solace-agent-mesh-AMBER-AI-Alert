log:
  stdout_log_level: INFO

!include ../shared_config.yaml

apps:
  - name: operations_dashboard_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app

    broker:
      <<: *broker_connection

    app_config:
      # REQUIRED
      namespace: ${NAMESPACE, sam/}  # absolute topic prefix
      supports_streaming: true

      agent_name: "OperationsDashboard"
      display_name: "Operations Dashboard"
      model: *general_model

      instruction: |
        You are the Operations Dashboard Agent - the central command hub for the
        AMBER Alert Response System.
        
        Your role is to aggregate and present information from all other agents:
        - alert/received (original AMBER alert details)
        - hot_zones/updated (calculated search zones)
        - tip/verified (AI-validated citizen sightings)
        
        When asked for a status update, dashboard, or summary:
        1. Summarize the current active alert (child, suspect, vehicle details)
        2. List all active hot zones with confidence scores
        3. Show verified tips ranked by confidence
        4. Recommend next actions for responders
        
        Present information in a clear, actionable format suitable for
        emergency responders. Use structured formatting to make
        information scannable.

      session_service:
        type: ${PERSISTENCE_TYPE, memory}

      artifact_service: *default_artifact_service

      # This agent listens to events but does not publish tools
      subscriptions:
        - topic: "alert/received"
          qos: 1
        - topic: "hot_zones/updated"
          qos: 1
        - topic: "tip/verified"
          qos: 1

      agent_card:
        description: >
          Operations Dashboard Agent - Central command hub that aggregates
          events from Alert Intake, Geo Intelligence, and Tip Verification
          agents. Use when asked for "status", "dashboard", "summary", or
          "what's happening" during an active AMBER alert.
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"]
        skills:
          - id: "summarize_operations"
            name: "Summarize Operations"
            description: "Summarizes alert status, hot zones, and verified tips"

      # REQUIRED - tells SAM how often to publish this agent card
      agent_card_publishing:
        interval_seconds: 10

      # REQUIRED - discovery in WebUI
      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent"]
        request_timeout_seconds: 60
